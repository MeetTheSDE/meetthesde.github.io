{
  "version": 3,
  "sources": ["../../wouter/esm/use-hash-location.js"],
  "sourcesContent": ["import { useSyncExternalStore } from './react-deps.js';\n\n// array of callback subscribed to hash updates\nconst listeners = {\n  v: [],\n};\n\nconst onHashChange = () => listeners.v.forEach((cb) => cb());\n\n// we subscribe to `hashchange` only once when needed to guarantee that\n// all listeners are called synchronously\nconst subscribeToHashUpdates = (callback) => {\n  if (listeners.v.push(callback) === 1)\n    addEventListener(\"hashchange\", onHashChange);\n\n  return () => {\n    listeners.v = listeners.v.filter((i) => i !== callback);\n    if (!listeners.v.length) removeEventListener(\"hashchange\", onHashChange);\n  };\n};\n\n// leading '#' is ignored, leading '/' is optional\nconst currentHashLocation = () => \"/\" + location.hash.replace(/^#?\\/?/, \"\");\n\nconst navigate = (to, { state = null, replace = false } = {}) => {\n  const [hash, search] = to.replace(/^#?\\/?/, \"\").split(\"?\");\n\n  const newRelativePath =\n    location.pathname + (search ? `?${search}` : location.search) + `#/${hash}`;\n  const oldURL = location.href;\n  const newURL = new URL(newRelativePath, location.origin).href;\n\n  if (replace) {\n    history.replaceState(state, \"\", newRelativePath);\n  } else {\n    history.pushState(state, \"\", newRelativePath);\n  }\n\n  const event =\n    typeof HashChangeEvent !== \"undefined\"\n      ? new HashChangeEvent(\"hashchange\", { oldURL, newURL })\n      : new Event(\"hashchange\", { detail: { oldURL, newURL } });\n\n  dispatchEvent(event);\n};\n\nconst useHashLocation = ({ ssrPath = \"/\" } = {}) => [\n  useSyncExternalStore(\n    subscribeToHashUpdates,\n    currentHashLocation,\n    () => ssrPath\n  ),\n  navigate,\n];\n\nuseHashLocation.hrefs = (href) => \"#\" + href;\n\nexport { navigate, useHashLocation };\n"],
  "mappings": ";;;;;;;AAGA,IAAM,YAAY;AAAA,EAChB,GAAG,CAAC;AACN;AAEA,IAAM,eAAe,MAAM,UAAU,EAAE,QAAQ,CAAC,OAAO,GAAG,CAAC;AAI3D,IAAM,yBAAyB,CAAC,aAAa;AAC3C,MAAI,UAAU,EAAE,KAAK,QAAQ,MAAM;AACjC,qBAAiB,cAAc,YAAY;AAE7C,SAAO,MAAM;AACX,cAAU,IAAI,UAAU,EAAE,OAAO,CAAC,MAAM,MAAM,QAAQ;AACtD,QAAI,CAAC,UAAU,EAAE,OAAQ,qBAAoB,cAAc,YAAY;AAAA,EACzE;AACF;AAGA,IAAM,sBAAsB,MAAM,MAAM,SAAS,KAAK,QAAQ,UAAU,EAAE;AAE1E,IAAM,WAAW,CAAC,IAAI,EAAE,QAAQ,MAAM,UAAU,MAAM,IAAI,CAAC,MAAM;AAC/D,QAAM,CAAC,MAAM,MAAM,IAAI,GAAG,QAAQ,UAAU,EAAE,EAAE,MAAM,GAAG;AAEzD,QAAM,kBACJ,SAAS,YAAY,SAAS,IAAI,MAAM,KAAK,SAAS,UAAU,KAAK,IAAI;AAC3E,QAAM,SAAS,SAAS;AACxB,QAAM,SAAS,IAAI,IAAI,iBAAiB,SAAS,MAAM,EAAE;AAEzD,MAAI,SAAS;AACX,YAAQ,aAAa,OAAO,IAAI,eAAe;AAAA,EACjD,OAAO;AACL,YAAQ,UAAU,OAAO,IAAI,eAAe;AAAA,EAC9C;AAEA,QAAM,QACJ,OAAO,oBAAoB,cACvB,IAAI,gBAAgB,cAAc,EAAE,QAAQ,OAAO,CAAC,IACpD,IAAI,MAAM,cAAc,EAAE,QAAQ,EAAE,QAAQ,OAAO,EAAE,CAAC;AAE5D,gBAAc,KAAK;AACrB;AAEA,IAAM,kBAAkB,CAAC,EAAE,UAAU,IAAI,IAAI,CAAC,MAAM;AAAA,MAClD;AAAA,IACE;AAAA,IACA;AAAA,IACA,MAAM;AAAA,EACR;AAAA,EACA;AACF;AAEA,gBAAgB,QAAQ,CAAC,SAAS,MAAM;",
  "names": []
}
